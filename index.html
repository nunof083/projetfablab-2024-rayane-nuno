<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maison FabLab</title>
    <link rel="stylesheet" href="./style/style.css">
</head>
<body>
    <header>
        <a href=""><img class="maison" src="./style/img/maison connectée_orange.png" alt="logo"></a>
    </header>
    <main>
        <section>
                <div class="lumiere">
                    <img
                    class="lampe"
                    src="./style/img/ampouleoff.png"
                    alt="lumière"
                    id="lumiere"
                    onclick="changeImage('lumiere','style/img/ampouleoff.png','style/img/ampouleon.png')"
                    />
                    <img
                    class="porte"
                    src="./style/img/porteferme.png"
                    alt="porte"
                    id="porteChange"
                    />
                    <div class="rangecss">
                        <input type="range" id="myRange" value="0" min="-1" max="100"/>
                    </div>
                </div>
                  <div class="gaz">
                    <img
                    class="logo"
                    src="./style/img/chauffageoff.png"
                    alt="chauffage"
                    id="chauffage"
                    onclick="changeImage('chauffage','style/img/chauffageoff.png','style/img/chauffageon.png')"
                    />
                    <input type="range" value="0" min="0" max="100">
                </div>
        </section>
    </main>
    <script>
        let rangevalue = document.getElementById("myRange")
        let imgchangevalue = document.getElementById("porteChange")


        rangevalue.oninput = function() {
            const getvalue = rangevalue.value;
             
            if (getvalue > 16 && getvalue < 33) {
                imgchangevalue.setAttribute("src", "./style/img/porteentreouverte.png")
            } else if (getvalue >= 33 && getvalue < 66) {
                imgchangevalue.setAttribute("src", "./style/img/porteouverte.png")
            }  else if (getvalue >= 66 && getvalue <= 100) {
                imgchangevalue.setAttribute("src", "./style/img/porteouverte180.png")
            }  else if (getvalue < 16) {
                imgchangevalue.setAttribute("src", "./style/img/porteferme.png")
            }
        }
            
        
        function changeImage(imageId, imgSrc1, imgSrc2) {
            const imgElement = document.getElementById(imageId);
            let etatLampe = 0;

          if (imgElement.src.includes(imgSrc1)) {
                imgElement.src = imgSrc2;
                etatLampe = 1;
          } else {
                imgElement.src = imgSrc1;
                etatLampe = 0;
          }
          fetch("http://localhost:8080/lampe?on="+etatLampe)
        }
      </script>
</body>
</html>